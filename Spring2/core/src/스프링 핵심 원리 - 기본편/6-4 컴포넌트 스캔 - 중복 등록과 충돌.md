
# ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº” & ì¤‘ë³µ ë“±ë¡ê³¼ ì¶©ëŒ 

ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ì—ì„œ ê°™ì€ ë¹ˆ ì´ë¦„ì„ ë“±ë¡í•˜ë©´ ì–´ë–»ê²Œ ë ê¹Œ?
2ê°€ì§€ ìƒí™©ì´ ìˆë‹¤.

- ìë™ ë¹ˆ ë“±ë¡ vs ìë™ ë¹ˆ ë“±ë¡
- ìˆ˜ë™ ë¹ˆ ë“±ë¡ vs ìë™ ë¹ˆ ë“±ë¡

### ìë™ ë¹ˆ ë“±ë¡ vs ìë™ ë¹ˆ ë“±ë¡

- ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ì— ì˜í•´ ìë™ìœ¼ë¡œ ìŠ¤í”„ë§ ë¹ˆì´ ë“±ë¡ë˜ëŠ”ë°, ê·¸ ì´ë¦„ì´ ê°™ì€ ê²½ìš° ìŠ¤í”„ë§ì€ ì˜¤ë¥˜ë¥¼ ë°œìƒì‹œí‚¨ë‹¤.
    - ConflictingBeanDefinitionException ì˜ˆì™¸ ë°œìƒ

ì˜ˆì‹œ

```java
@Component("service")
public class MemberServiceImpl implements MemberService {
}

@Component("service")
public class OrderServiceImpl implements OrderService {
}
```

- MemberServiceImpl ìŠ¤í”„ë§ ë¹ˆ ì´ë¦„: service
- OrderServiceImpl ìŠ¤í”„ë§ ë¹ˆ ì´ë¦„: service
- ConflictingBeanDefinitionException ì˜ˆì™¸ ë°œìƒ


### ìˆ˜ë™ ë¹ˆ ë“±ë¡ vs ìë™ ë¹ˆ ë“±ë¡

- ë§Œì•½ ìˆ˜ë™ ë¹ˆ ë“±ë¡ê³¼ ìë™ ë¹ˆ ë“±ë¡ì—ì„œ ë¹ˆ ì´ë¦„ì´ ì¶©ëŒë˜ë©´ ì–´ë–»ê²Œ ë ê¹Œ?

ìë™ ë¹ˆ ë“±ë¡
```java
@Component
public class MemoryMemberRepository implements MemberRepository {}
```

ìˆ˜ë™ ë¹ˆ ë“±ë¡ 

```java
@Configuration
@ComponentScan(
        excludeFilters = @ComponentScan.Filter(type = FilterType.ANNOTATION, classes = Configuration.class)
)
public class AutoAppConfig {
    @Bean(name = "memoryMemberRepository")
    public MemberRepository memberRepository(){
        return new MemoryMemberRepository();
    }
}
```

â­ï¸ ìŠ¤í”„ë§ ë¶€íŠ¸ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ë§Œ ì‚¬ìš©í•´ì„œ í…ŒìŠ¤íŠ¸ 

```java
public class AutoAppConfigTest {
    @Test
    void basicScan(){
        AnnotationConfigApplicationContext ac = new AnnotationConfigApplicationContext(AutoAppConfig.class);

        MemberService memberService = ac.getBean(MemberService.class);
        assertThat(memberService).isInstanceOf(MemberService.class);

    }
}
```
- ì˜¤ë¥˜x
- ì´ ê²½ìš° ìˆ˜ë™ ë¹ˆ ë“±ë¡ì´ ìš°ì„ ê¶Œì„ ê°€ì§„ë‹¤.
- ìˆ˜ë™ ë¹ˆì´ ìë™ ë¹ˆì„ ì˜¤ë²„ë¼ì´ë”© í•´ë²„ë¦°ë‹¤.

ğŸ’— ì¤‘ìš” ì‚¬ì‹¤ ì •ë¦¬
- test íŒ¨í‚¤ì§€ì—ì„œ í•˜ëŠ” í…ŒìŠ¤íŠ¸ë“¤ì€ @SpringBootTestê°€ ì•„ë‹Œ ì´ìƒ ìŠ¤í”„ë§ ë¶€íŠ¸ë¡œ í•˜ëŠ” í…ŒìŠ¤íŠ¸ê°€ ì•„ë‹ˆë‹¤ 
  - ìˆœìˆ˜í•œ ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ì˜ ì»¨í…ìŠ¤íŠ¸ ì‚¬ìš©í•˜ëŠ” í…ŒìŠ¤íŠ¸
  - ê·¸ë˜ì„œ application.propertiesë‚˜ yaml íŒŒì¼ ê°™ì€ ì„¤ì • íŒŒì¼ì— ì˜í–¥ì„ ë°›ì§€ ì•ŠëŠ”ë‹¤.
- application.properties - spring.main.allow-bean-definition-overriding = ?
  - spring boot = false
  - spring frame work = true 
  - ìŠ¤í”„ë§ ë¶€íŠ¸ ê¸°ë°˜ìœ¼ë¡œ ì‹¤í–‰ í•˜ë©´ default = false
  - ìŠ¤í”„ë§ í”„ë ˆì„ ì›Œí¬ ê¸°ë°˜ìœ¼ë¡œ ì‹¤í–‰ í•˜ë©´ default = true

ìŠ¤í”„ë§ ë¶€íŠ¸ë¡œ ì‹¤í–‰ 

```java
@SpringBootApplication
public class CoreApplication {
	public static void main(String[] args) {
		SpringApplication.run(CoreApplication.class, args);
	}
}
```

Consider renaming one of the beans or enabling overriding by setting spring.main.allow-bean-definition-overriding=true


