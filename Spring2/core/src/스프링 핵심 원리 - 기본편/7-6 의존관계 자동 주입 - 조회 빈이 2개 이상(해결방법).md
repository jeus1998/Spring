
# μμ΅΄κ΄€κ³„ μλ™ μ£Όμ… - μ΅°ν λΉμ΄ 2κ° μ΄μƒ(ν•΄κ²°λ°©λ²•)

μ΅°ν λΉμ΄ 2κ° μ΄μƒμΌ λ• ν•΄κ²° λ°©λ²•
- @Autowired ν•„λ“ λ…, νλΌλ―Έν„° λ… λ§¤μΉ­
- @Qualifier -> @QualifierλΌλ¦¬ λ§¤μΉ­ λΉ μ΄λ¦„ λ§¤μΉ­
- @Primary μ‚¬μ©

### @Autowired ν•„λ“λ…, νλΌλ―Έν„° λ… λ§¤μΉ­

@Autowiredλ” νƒ€μ… λ§¤μΉ­μ„ μ‹λ„ν•κ³ , μ΄λ• μ—¬λ¬ λΉμ΄ μμΌλ©΄ ν•„λ“ μ΄λ¦„, νλΌλ―Έν„° μ΄λ¦„μΌλ΅ λΉ μ΄λ¦„μ„ μ¶”κ°€ λ§¤μΉ­ν•
λ‹¤.

κΈ°μ΅΄ μ½”λ“
```java
@Component
public class OrderServiceImpl implements OrderService {
    private final MemberRepository memberRepository;
    private final DiscountPolicy discountPolicy;

    @Autowired
    public OrderServiceImpl(MemberRepository memberRepository, DiscountPolicy discountPolicy) {
        this.memberRepository = memberRepository;
        this.discountPolicy = discountPolicy;
    }
}    
```

μ—λ¬ λ°μƒ β­•οΈ 7-5μ—μ„ μ„¤λ…

νλΌλ―Έν„°λ… λ³€κ²½ μ½”λ“
```java
@Component
public class OrderServiceImpl implements OrderService {
    private final MemberRepository memberRepository;
    private final DiscountPolicy discountPolicy;

    @Autowired
    public OrderServiceImpl(MemberRepository memberRepository, DiscountPolicy rateDiscountPolicy) {
        this.memberRepository = memberRepository;
        this.discountPolicy = rateDiscountPolicy;
    }
}    
```

μ—λ¬ λ°μƒ β

π’― @Autowired λ§¤μΉ­ μμ„ μ •λ¦¬
- νƒ€μ… λ§¤μΉ­
- νƒ€μ… λ§¤μΉ­μ κ²°κ³Όκ°€ 2κ° μ΄μƒμΌ λ• ν•„λ“ λ…, νλΌλ―Έν„° λ…μΌλ΅ λΉ λ§¤μΉ­

λ‚΄ μκ²¬ 
```text
μ΄κ±΄ κ²°κµ­ DIP μ„λ°μ΄ μ•„λ‹κ°€ μ‹¶λ‹¤ λ‚μ¤‘μ— ν• μΈ μ •μ±…μ„ rateDiscountPolicy -> fixDiscountPolicy 
λ³€κ²½μ„ ν•κ² λλ©΄ κ²°κµ­ ν•„νΈ λ…μ΄λ‚ νλΌλ―Έν„° λ…μ„ λ³€κ²½ν•΄μ•Όν•λ‹¤. π‘‰ ν΄λΌμ΄μ–ΈνΈμΈ serviceImpl λ³€κ²½ 
```

### @Qualifier μ‚¬μ© 

@Qualifier λ” μ¶”κ°€ κµ¬λ¶„μλ¥Ό λ¶™μ—¬μ£Όλ” λ°©λ²•μ΄λ‹¤. μ£Όμ…μ‹ μ¶”κ°€μ μΈ λ°©λ²•μ„ μ κ³µν•λ” κ²ƒμ΄μ§€ λΉ μ΄λ¦„μ„ λ³€κ²½ν•λ” κ²ƒ
μ€ μ•„λ‹λ‹¤.

λΉ λ“±λ΅ μ‹ @Qualifierλ¥Ό λ¶™μ—¬ μ¤€λ‹¤.

```java
@Component
@Qualifier("mainDiscountPolicy")
public class RateDiscountPolicy implements DiscountPolicy {}

@Component
@Qualifier("subDiscountPolicy")
public class FixDiscountPolicy implements DiscountPolicy {}
```
μ£Όμ…μ‹μ— @Qualifierλ¥Ό λ¶™μ—¬μ£Όκ³  λ“±λ΅ν• μ΄λ¦„μ„ μ μ–΄μ¤€λ‹¤.

```java
    @Autowired
    public OrderServiceImpl(MemberRepository memberRepository, @Qualifier("mainDiscountPolicy") DiscountPolicy discountPolicy) {
        this.memberRepository = memberRepository;
        this.discountPolicy = discountPolicy;
    }
```

- @Qualifier λ΅ μ£Όμ…ν•  λ• @Qualifier("mainDiscountPolicy") λ¥Ό λ»μ°ΎμΌλ©΄ μ–΄λ–»κ² λ κΉ?
  κ·Έλ¬λ©΄ mainDiscountPolicyλΌλ” μ΄λ¦„μ μ¤ν”„λ§ λΉμ„ μ¶”κ°€λ΅ μ°Ύλ”λ‹¤.
- ν•μ§€λ§ @Qualifierλ” @Qualifierλ¥Ό μ°Ύλ” μ©λ„λ΅λ§ μ‚¬μ©ν•λ”κ² λ…ν™•ν•κ³  μΆ‹λ‹¤.

λ‹¤μκ³Ό κ°™μ΄ μ§μ ‘ λΉ λ“±λ΅μ‹μ—λ„ @Qualifierλ¥Ό λ™μΌν•κ² μ‚¬μ©ν•  μ μλ‹¤
```java
@Bean
@Qualifier("mainDiscountPolicy")
public DiscountPolicy discountPolicy() {
    return new ...
}
```

π’― @Qualifier λ§¤μΉ­ μμ„ μ •λ¦¬
- @QualifierλΌλ¦¬ λ§¤μΉ­
- λΉ μ΄λ¦„ λ§¤μΉ­
- NoSuchBeanDefinitionException μμ™Έ λ°μƒ

### @Primary μ‚¬μ©

@Primaryλ” μ°μ„ μμ„λ¥Ό μ •ν•λ” λ°©λ²•μ΄λ‹¤. @Autowired μ‹μ— μ—¬λ¬ λΉμ΄ λ§¤μΉ­λλ©΄ @Primaryκ°€ μ°μ„ κ¶μ„ κ°€μ§„λ‹¤.

rateDiscountPolicy κ°€ μ°μ„ κ¶μ„ κ°€μ§€λ„λ΅ ν•μ.

```java
@Component
@Primary
public class RateDiscountPolicy implements DiscountPolicy {}

@Component
public class FixDiscountPolicy implements DiscountPolicy {}
```

### @@Primary, @Qualifier μ°μ„ μμ„

  @Primaryλ” κΈ°λ³Έκ°’ μ²λΌ λ™μ‘ν•κ³  @Qualifierλ” λ§¤μ° μƒμ„Έν•κ² λ™μ‘ν•λ‹¤.
  μ¤ν”„λ§μ€ μλ™λ³΄λ‹¤λ” μλ™μ΄, λ„’μ€ λ²”μ„μ μ„ νƒκ¶ λ³΄λ‹¤λ” μΆμ€ λ²”μ„μ μ„ νƒκ¶μ΄ μ°μ„  μμ„κ°€ λ†’λ‹¤.
  λ”°λΌμ„ μ—¬κΈ°μ„λ„ @Qualifier κ°€ μ°μ„ κ¶μ΄ λ†’λ‹¤.

### @@Primary, @Qualifier ν™μ©

μ½”λ“μ—μ„ μμ£Ό μ‚¬μ©ν•λ” λ©”μΈ λ°μ΄ν„°λ² μ΄μ¤μ μ»¤λ„¥μ…μ„ νλ“ν•λ” μ¤ν”„λ§ λΉμ΄ μκ³ , 
μ½”λ“μ—μ„ νΉλ³„ν• κΈ°λ¥μΌλ΅ κ°€λ” μ‚¬μ©ν•λ” μ„λΈ λ°μ΄ν„°λ² μ΄μ¤μ μ»¤λ„¥μ…μ„ νλ“ν•λ” μ¤ν”„λ§ λΉμ΄ μλ‹¤κ³  μƒκ°ν•΄λ³΄μ.
λ©”μΈ λ°μ΄ν„°λ² μ΄μ¤μ μ»¤λ„¥μ…μ„ νλ“ν•λ” μ¤ν”„λ§ λΉμ€ @Primaryλ¥Ό μ μ©ν•΄μ„ μ΅°νν•λ” κ³³μ—μ„
@Qualifier μ§€μ • μ—†μ΄ νΈλ¦¬ν•κ² μ΅°νν•κ³ , μ„λΈ λ°μ΄ν„°λ² μ΄μ¤ μ»¤λ„¥μ… λΉμ„ νλ“ν•  λ•λ” 
@Qualifierλ¥Ό μ§€μ •ν•΄μ„ λ…μ‹μ μΌλ΅ νλ“ ν•λ” λ°©μ‹μΌλ΅ μ‚¬μ©ν•λ©΄ μ½”λ“λ¥Ό κΉ”λ”ν•κ² μ μ§€ν•  μ μλ‹¤.
λ¬Όλ΅  μ΄λ• λ©”μΈ λ°μ΄ν„°λ² μ΄μ¤μ μ¤ν”„λ§ λΉμ„ λ“±λ΅ν•  λ• @Qualifier λ¥Ό μ§€μ •ν•΄μ£Όλ” κ²ƒμ€ μƒκ΄€μ—†λ‹¤.

