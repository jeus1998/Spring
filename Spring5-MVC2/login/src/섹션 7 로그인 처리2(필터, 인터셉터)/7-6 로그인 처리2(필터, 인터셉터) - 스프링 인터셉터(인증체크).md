
# ë¡œê·¸ì¸ ì²˜ë¦¬2(í•„í„°, ì¸í„°ì…‰í„°) - ìŠ¤í”„ë§ ì¸í„°ì…‰í„°(ì¸ì¦ì²´í¬)

ì„œë¸”ë¦¿ í•„í„°ì—ì„œ ì‚¬ìš©í–ˆë˜ ì¸ì¦ ì²´í¬ ê¸°ëŠ¥ì„ ìŠ¤í”„ë§ ì¸í„°ì…‰í„°ë¡œ ê°œë°œí•´ë³´ì.

### LoginCheckInterceptor
```java
@Slf4j
public class LoginCheckInterceptor implements HandlerInterceptor {
    @Override
    public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception {

        String requestURI = request.getRequestURI();
        log.info("ì¸ì¦ ì²´í¬ ì¸í„°ì…‰í„° ì‹¤í–‰{}", requestURI);

        HttpSession session = request.getSession(false);

        if(session == null || session.getAttribute(SessionConst.LOGIN_MEMBER) == null){

            log.info("ë¯¸ì¸ì¦ ì‚¬ìš©ì ìš”ì²­{}", requestURI);

            // ë¡œê·¸ì¸ìœ¼ë¡œ redirect
            response.sendRedirect("/login?redirectURL=" + requestURI);
            return false;
        }
        log.info("ì¸ì¦ ì™„ë£Œ ì •ìƒ ìš”ì²­{}", requestURI);
        return true;
    }
}
```
- ì„œë¸”ë¦¿ í•„í„°ì™€ ë¹„êµí•´ì„œ ì½”ë“œê°€ ë§¤ìš° ê°„ê²°í•˜ë‹¤. ì¸ì¦ì´ë¼ëŠ” ê²ƒì€ ì»¨íŠ¸ë¡¤ëŸ¬ í˜¸ì¶œ ì „ì—ë§Œ í˜¸ì¶œë˜ë©´ ëœë‹¤
- preHandle ë§Œ êµ¬í˜„í•˜ë©´ ëœë‹¤.

### WebConfig - ìˆœì„œ ì£¼ì˜, ì„¸ë°€í•œ ì„¤ì • ê°€ëŠ¥
```java
@Configuration
public class WebConfig implements WebMvcConfigurer {
    @Override
    public void addInterceptors(InterceptorRegistry registry) {
        registry.addInterceptor(new LogInterceptor())
                .order(1)
                .addPathPatterns("/**")
                .excludePathPatterns("/css/**", "/*.ico", "/error");

        registry.addInterceptor(new LoginCheckInterceptor())
                .order(2)
                .addPathPatterns("/**")
                .excludePathPatterns("/", "/css/**", "/members/add", "/logout",
                        "/*.ico", "/error", "/login"
                );
    }
}
```

- ì¸í„°ì…‰í„°ë¥¼ ì ìš©í•˜ê±°ë‚˜ í•˜ì§€ ì•Šì„ ë¶€ë¶„ì€ addPathPatterns ì™€ excludePathPatterns ì— ì‘ì„±í•˜ë©´ ëœë‹¤.
- ê¸°ë³¸ì ìœ¼ë¡œ ëª¨ë“  ê²½ë¡œì— í•´ë‹¹ ì¸í„°ì…‰í„°ë¥¼ ì ìš©
  - addPathPatterns("/**")
- ```(/**), í™ˆ(/), íšŒì›ê°€ì…(/members/add), ë¡œê·¸ì¸(/login), ë¦¬ì†ŒìŠ¤ ì¡°íšŒ(/css/**), ì˜¤ë¥˜(/error)```ì™€ ê°™ì€ ë¶€ë¶„
  - ë¡œê·¸ì¸ ì²´í¬ ì¸í„°ì…‰í„°ë¥¼ ì ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤.
- ì„œë¸”ë¦¿ í•„í„°ì™€ ë¹„êµí•´ë³´ë©´ ë§¤ìš° í¸ë¦¬í•œ ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤.


ğŸ’¯ì •ë¦¬
- ì„œë¸”ë¦¿ í•„í„°ì™€ ìŠ¤í”„ë§ ì¸í„°ì…‰í„°ëŠ” ì›¹ê³¼ ê´€ë ¨ëœ ê³µí†µ ê´€ì‹¬ì‚¬ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•œ ê¸°ìˆ ì´ë‹¤.
- ì„œë¸”ë¦¿ í•„í„°ì™€ ë¹„êµí•´ì„œ ìŠ¤í”„ë§ ì¸í„°ì…‰í„°ê°€ ê°œë°œì ì…ì¥ì—ì„œ í›¨ì”¬ í¸ë¦¬í•˜ë‹¤ëŠ” ê²ƒì„ ì½”ë“œë¡œ ì´í•´í–ˆì„ ê²ƒì´ë‹¤.
- íŠ¹ë³„í•œ ë¬¸ì œê°€ ì—†ë‹¤ë©´ ì¸í„°ì…‰í„°ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.

