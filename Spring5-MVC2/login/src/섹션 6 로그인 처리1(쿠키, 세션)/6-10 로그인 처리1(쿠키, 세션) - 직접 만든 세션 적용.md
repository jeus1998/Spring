
# ë¡œê·¸ì¸ ì²˜ë¦¬1(ì¿ í‚¤, ì„¸ì…˜) - ì§ì ‘ ë§Œë“  ì„¸ì…˜ ì ìš©

### LoginController - loginV2()

```java
@PostMapping("/login")
public String loginV2(@Validated @ModelAttribute LoginForm form,
                    BindingResult bindingResult,
                    HttpServletResponse response){

    if(bindingResult.hasErrors()){
        return "login/loginForm";
    }

    Member loginMember = loginService.login(form.getLoginId(), form.getPassword());

    if(loginMember == null){
        bindingResult.reject("loginFail", "ì•„ì•„ë”” ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ ë§ì§€ ì•ŠìŠµë‹ˆë‹¤.");
        return "login/loginForm";
    }

    // ë¡œê·¸ì¸ ì„±ê³µ ì²˜ë¦¬

    // ì„¸ì…˜ ê´€ë¦¬ìë¥¼ í†µí•´ ì„¸ì…˜ì„ ê´€ë¦¬í•˜ê³ , íšŒì› ë°ì´í„° ë³´ê´€
    sessionManger.createSession(loginMember, response);
    return "redirect:/";
}
```

### LoginController - logoutV2()

```java
@PostMapping("/logout")
public String logoutV2(HttpServletRequest request){
    sessionManger.expire(request);
    return "redirect:/";
}
```

### HomeController - homeLoginV2()

```java
@GetMapping("/")
public String homeLoginV2(HttpServletRequest request, Model model) {

     Member loginMember = (Member)sessionManger.getSession(request);

     if(loginMember == null){
        return "home";
     }
     
     model.addAttribute("member", loginMember);
     return "loginHome";
}
```

### ğŸ’¯ì •ë¦¬

```text
ì´ë²ˆ ì‹œê°„ì—ëŠ” ì„¸ì…˜ê³¼ ì¿ í‚¤ì˜ ê°œë…ì„ ëª…í™•í•˜ê²Œ ì´í•´í•˜ê¸° ìœ„í•´ì„œ ì§ì ‘ ë§Œë“¤ì–´ë³´ì•˜ë‹¤.
ì‚¬ì‹¤ ì„¸ì…˜ì´ë¼ëŠ” ê²ƒì´ ë­”ê°€ íŠ¹ë³„í•œê²ƒì´ ì•„ë‹ˆë¼ ë‹¨ì§€ ì¿ í‚¤ë¥¼ ì‚¬ìš©í•˜ëŠ”ë°, ì„œë²„ì—ì„œ ë°ì´í„°ë¥¼ ìœ ì§€í•˜ëŠ” ë°©ë²•ì¼ ë¿ì´ë¼ëŠ” ê²ƒì„ ì´í•´í–ˆì„ ê²ƒì´ë‹¤.
ê·¸ëŸ°ë° í”„ë¡œì íŠ¸ë§ˆë‹¤ ì´ëŸ¬í•œ ì„¸ì…˜ ê°œë…ì„ ì§ì ‘ ê°œë°œí•˜ëŠ” ê²ƒì€ ìƒë‹¹íˆ ë¶ˆí¸í•  ê²ƒì´ë‹¤. ê·¸ë˜ì„œ ì„œë¸”ë¦¿ë„ ì„¸ì…˜ ê°œë…ì„ ì§€ì›
í•œë‹¤.
ì„œë¸”ë¦¿ì´ ê³µì‹ ì§€ì›í•˜ëŠ” ì„¸ì…˜ì€ ìš°ë¦¬ê°€ ì§ì ‘ ë§Œë“  ì„¸ì…˜ê³¼ ë™ì‘ ë°©ì‹ì´ ê±°ì˜ ê°™ë‹¤. 
ì¶”ê°€ë¡œ ì„¸ì…˜ì„ ì¼ì •ì‹œê°„ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë©´ í•´ë‹¹ ì„¸ì…˜ì„ ì‚­ì œí•˜ëŠ” ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤.
```
