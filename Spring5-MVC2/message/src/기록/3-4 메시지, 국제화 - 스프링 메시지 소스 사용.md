
# ë©”ì‹œì§€, êµ­ì œí™” - ìŠ¤í”„ë§ ë©”ì‹œì§€ ì†ŒìŠ¤ ì‚¬ìš©

### MessageSource ì¸í„°í˜ì´ìŠ¤

```java
public interface MessageSource {
    String getMessage(String code, @Nullable Object[] args, @Nullable String
            defaultMessage, Locale locale);

    String getMessage(String code, @Nullable Object[] args, Locale locale)
            throws NoSuchMessageException;
}
```
- MessageSource ì¸í„°í˜ì´ìŠ¤ë¥¼ ë³´ë©´ ì½”ë“œë¥¼ í¬í•¨í•œ ì¼ë¶€ íŒŒë¼ë¯¸í„°ë¡œ ë©”ì‹œì§€ë¥¼ ì½ì–´ì˜¤ëŠ” ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤.

### ì¸í…”ë¦¬ì œì´ë¥¼ ì‚¬ìš©í•˜ë©´ í•œê¸€ ê¹¨ì§

- messages.properties í•œê¸€ë¡œ ì €ì¥ â¡ï¸ í•œê¸€ ê¹¨ì§
- Setting - File Encodings
  - Default encoding for properties files
  - ISO-8859-1 â¡ï¸ UTF-8
  - Transparent native-to-ascil conversion ì²´í¬â˜‘ï¸
- í•´ê²° ğŸ‘ 

### MessageSourceTest.java

- test/java/hello/itemservice/message.MessageSourceTest.java

```java
@SpringBootTest
public class MessageSourceTest {
    @Autowired
    MessageSource ms;

    @Test
    void helloMessage(){
        String result = ms.getMessage("hello", null, null);
        assertThat(result).isEqualTo("ì•ˆë…•");
    }
}
```

- ms.getMessage("hello", null, null)
  - code: hello
  - args: null
  - locale: null

locale ì •ë³´ê°€ ì—†ìœ¼ë©´ basename ì—ì„œ ì„¤ì •í•œ ê¸°ë³¸ ì´ë¦„ ë©”ì‹œì§€ íŒŒì¼ì„ ì¡°íšŒí•œë‹¤. basename ìœ¼ë¡œ messagesë¥¼
ì§€ì • í–ˆìœ¼ë¯€ë¡œ messages.properties íŒŒì¼ì—ì„œ ë°ì´í„° ì¡°íšŒí•œë‹¤.

### MessageSourceTest ì¶”ê°€ - ë©”ì‹œì§€ê°€ ì—†ëŠ” ê²½ìš°, ê¸°ë³¸ ë©”ì‹œì§€
```java
@Test
@DisplayName("í•´ë‹¹ ë©”ì‹œì§€ê°€ ì—†ìœ¼ë©´")
void notFoundMessageCode(){
    assertThatThrownBy(() -> ms.getMessage("no_code", null, null))
            .isInstanceOf(NoSuchMessageException.class);
}

@Test
void notFoundMessageCodeDefaultMessage() {
     String result = ms.getMessage("no_code", null, "ê¸°ë³¸ ë©”ì‹œì§€", null);
     assertThat(result).isEqualTo("ê¸°ë³¸ ë©”ì‹œì§€");
}
```

- ë©”ì‹œì§€ê°€ ì—†ëŠ” ê²½ìš°ì—ëŠ” NoSuchMessageException ì´ ë°œìƒí•œë‹¤.
- ë©”ì‹œì§€ê°€ ì—†ì–´ë„ ê¸°ë³¸ ë©”ì‹œì§€( defaultMessage )ë¥¼ ì‚¬ìš©í•˜ë©´ ê¸°ë³¸ ë©”ì‹œì§€ê°€ ë°˜í™˜ëœë‹¤.

### MessageSourceTest ì¶”ê°€ - ë§¤ê°œë³€ìˆ˜ ì‚¬ìš©

```java
@Test
void argumentMessage(){
    String message = ms.getMessage("hello.name", new Object[]{"Spring"}, null);
    assertThat(message).isEqualTo("ì•ˆë…• Spring");
}
```
- ë‹¤ìŒ ë©”ì‹œì§€ì˜ {0} ë¶€ë¶„ì€ ë§¤ê°œë³€ìˆ˜ë¥¼ ì „ë‹¬í•´ì„œ ì¹˜í™˜í•  ìˆ˜ ìˆë‹¤.
- hello.name=ì•ˆë…• {0} Spring ë‹¨ì–´ë¥¼ ë§¤ê°œë³€ìˆ˜ë¡œ ì „ë‹¬ â¡ï¸ ì•ˆë…• Spring

### êµ­ì œí™” íŒŒì¼ ì„ íƒ

locale ì •ë³´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ êµ­ì œí™” íŒŒì¼ì„ ì„ íƒí•œë‹¤.
- Localeì´ en_US ì˜ ê²½ìš° messages_en_US messages_en messages ìˆœì„œë¡œ ì°¾ëŠ”ë‹¤.
- Locale ì— ë§ì¶”ì–´ êµ¬ì²´ì ì¸ ê²ƒì´ ìˆìœ¼ë©´ êµ¬ì²´ì ì¸ ê²ƒì„ ì°¾ê³ , ì—†ìœ¼ë©´ ë””í´íŠ¸ë¥¼ ì°¾ëŠ”ë‹¤ê³  ì´í•´í•˜ë©´ ëœë‹¤.

```java
@Test
void defaultLang(){
     assertThat(ms.getMessage("hello", null, null)).isEqualTo("ì•ˆë…•");
     assertThat(ms.getMessage("hello", null, Locale.KOREA)).isEqualTo("ì•ˆë…•");
}

@Test
void enLang(){
    assertThat(ms.getMessage("hello", null, Locale.ENGLISH )).isEqualTo("hello");
}
```

- ms.getMessage("hello", null, null) : locale ì •ë³´ê°€ ì—†ìœ¼ë¯€ë¡œ Locale.getDefault()ì„ í˜¸ì¶œí•´ì„œ messages_ko.properties 
  ì¡°íšŒ ì‹œë„ â¡ï¸ ì¡°íšŒ ì‹¤íŒ¨ â¡ï¸ messages.properties ì¡°íšŒ
- ms.getMessage("hello", null, Locale.KOREA) : locale ì •ë³´ê°€ ìˆì§€ë§Œ, message_ko ê°€ ì—†ìœ¼ë¯€ë¡œ messages ë¥¼ ì‚¬ìš©
- ms.getMessage("hello", null, Locale.ENGLISH) : locale ì •ë³´ê°€ Locale.ENGLISH ì´ë¯€ë¡œ messages_en ì„ ì°¾ì•„ì„œ ì‚¬ìš©





